<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–´ë¥´ì‹  êµí†µì•ˆì „ ë° ì¸ì§€ ì§„ë‹¨ ì•±</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* 1. ê¸°ë³¸ ì„¤ì • */
        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            background-color: #f0f2f5;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh;
            font-family: 'Noto Sans KR', sans-serif;
            word-break: keep-all; 
        }

        /* 2. ìŠ¬ë¼ì´ë“œ ì»¨í…Œì´ë„ˆ */
        .slide-container {
            width: 1280px; height: 720px;
            background-color: #ffffff;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            position: relative; overflow: hidden;
            display: none;
            flex-direction: column;
            padding: 30px 50px; /* ìƒí•˜ íŒ¨ë”© ì¶•ì†Œ */
            border: 4px solid #ffaa00;
        }
        .slide-container.active { display: flex; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        /* 3. íƒ€ì´í¬ê·¸ë˜í”¼ */
        h1 { 
            font-family: 'Jua', sans-serif; 
            font-size: 64px; color: #333; 
            margin: 0 0 20px 0; line-height: 1.2; 
            white-space: nowrap;
        }
        h2 { 
            font-family: 'Jua', sans-serif; 
            font-size: 42px; color: #333; 
            margin: 0 0 25px 0; line-height: 1.3;
        }
        p { font-size: 26px; color: #555; line-height: 1.6; margin-bottom: 20px; }
        .highlight { color: #d35400; font-weight: bold; }

        /* 4. ë ˆì´ì•„ì›ƒ ìœ í‹¸ë¦¬í‹° */
        .center-box { text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; }
        .split-box { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; height: 100%; align-items: center; }
        .img-wrapper { width: 100%; height: 480px; border-radius: 20px; overflow: hidden; background: #eee; border: 2px solid #ddd; }
        .img-wrapper img { width: 100%; height: 100%; object-fit: cover; }

        /* 5. ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-start {
            background: #ff6b6b; color: white; border: none;
            padding: 25px 80px; font-size: 40px; font-family: 'Jua', sans-serif;
            border-radius: 60px; cursor: pointer;
            box-shadow: 0 8px 0 #c0392b; transition: transform 0.1s; margin-top: 10px;
        }
        .btn-start:active { transform: translateY(8px); box-shadow: none; }

        .btn-option {
            background: white; border: 3px solid #eee; border-radius: 20px;
            padding: 20px 25px; font-size: 28px;
            text-align: left; width: 100%; margin-bottom: 18px;
            cursor: pointer; transition: 0.2s;
            display: flex; align-items: center; font-weight: 500; line-height: 1.2;
        }
        .btn-option:hover { background: #fff3e0; border-color: #ffaa00; transform: translateX(10px); }
        .btn-option:active { background: #ffe0b2; transform: scale(0.98); }
        .btn-option i { margin-right: 20px; color: #ffaa00; width: 40px; text-align: center; flex-shrink: 0; }

        /* ê´€ë¦¬ììš© ë¦¬ì…‹ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ì‹ ê·œ ì¶”ê°€) */
        .admin-reset-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #bdc3c7; /* ì€ì€í•œ íšŒìƒ‰ (ëˆˆì— ëœ ë„ê²Œ) */
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 0 #95a5a6;
            transition: all 0.2s;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .admin-reset-btn:hover { background-color: #95a5a6; }
        .admin-reset-btn:active { transform: translateY(4px); box-shadow: none; }

        /* 6. ê²°ê³¼ ë¦¬í¬íŠ¸ ìŠ¤íƒ€ì¼ */
        .tab-menu { display: flex; gap: 20px; justify-content: center; margin-bottom: 20px; }
        .tab-btn {
            padding: 15px 40px; font-size: 28px; font-family: 'Jua', sans-serif;
            border: none; background: #ddd; border-radius: 20px 20px 0 0;
            cursor: pointer; color: #666; width: 250px;
        }
        .tab-btn.active { background: #ffaa00; color: white; box-shadow: 0 -5px 10px rgba(0,0,0,0.1); }
        /* íŒ¨ë”© ìƒí–¥ ì¡°ì • (í•˜ë‹¨ ë²„íŠ¼ ì œê±°ë¡œ ê³µê°„ í™•ë³´ë¨) */
        .report-content { flex: 1; border: 4px solid #ffaa00; border-radius: 20px; padding: 40px; background: white; display: none; overflow-y: auto; }
        .report-content.show { display: block; }
        .score-box { background: #fff3cd; padding: 15px; border-radius: 15px; text-align: center; margin-bottom: 20px; }
        .score-num { font-size: 60px; font-family: 'Jua', sans-serif; color: #d35400; }
        .solution-box { border-left: 6px solid #27ae60; background: #e8f8f5; padding: 20px; margin-top: 20px; border-radius: 0 10px 10px 0; }
        .solution-title { font-size: 24px; font-weight: bold; color: #27ae60; margin-bottom: 10px; display: block;}

        /* ì°¨íŠ¸ ë° ì§„í–‰ë°” */
        .chart-row { display: flex; align-items: center; margin-bottom: 15px; }
        .chart-label { width: 160px; font-size: 24px; font-weight: bold; color: #555; text-align: right; margin-right: 20px; }
        .chart-bar-bg { flex: 1; height: 30px; background: #eee; border-radius: 15px; overflow: hidden; }
        .chart-bar { height: 100%; background: linear-gradient(90deg, #ffaa00, #ff6b6b); width: 0%; transition: width 1s ease-out; }
        .progress-container { position: absolute; top: 0; left: 0; width: 100%; height: 10px; background: #eee; }
        .progress-fill { height: 100%; background: #27ae60; width: 0%; transition: width 0.3s; }

        /* ìˆ«ì íŒ¨ë“œ ìŠ¤íƒ€ì¼ (Q6) - í™”ë©´ ë§ì¶¤ ìµœì í™” */
        .date-display {
            background: #fff; border: 3px solid #ccc; border-radius: 15px;
            padding: 10px 20px;
            font-size: 36px; font-weight: bold; text-align: center;
            margin-bottom: 15px;
            color: #333; display: flex; justify-content: center; gap: 20px;
            height: 70px; align-items: center;
        }
        .date-part { color: #d35400; border-bottom: 3px solid #d35400; padding: 0 10px; min-width: 70px; display: inline-block; }
        
        .numpad { 
            display: grid; grid-template-columns: repeat(3, 1fr); 
            gap: 10px;
            width: 100%; max-width: 360px; margin: 0 auto; 
        }
        .num-btn {
            background: #f8f9fa; border: 2px solid #ddd; border-radius: 10px;
            font-size: 28px; font-weight: bold; 
            padding: 0; 
            cursor: pointer;
            box-shadow: 0 4px 0 #ddd; transition: 0.1s;
            height: 60px; /* ë†’ì´ ì¶•ì†Œ */
            display: flex; align-items: center; justify-content: center;
        }
        .num-btn:active { transform: translateY(4px); box-shadow: none; background: #eee; }
        .num-btn.confirm { background: #27ae60; color: white; border-color: #219150; box-shadow: 0 4px 0 #1e8449; }

    </style>
</head>
<body>

    <div class="progress-container"><div class="progress-fill" id="progressBar"></div></div>

    <!-- 1. ì‹œì‘ í™”ë©´ -->
    <div class="slide-container active" id="page-start">
        <div class="center-box">
            <i class="fa-solid fa-traffic-light" style="font-size: 100px; color: #27ae60; margin-bottom: 30px;"></i>
            <h1>ì–´ë¥´ì‹  êµí†µì•ˆì „ <span class="highlight">ë° ì¸ì§€ëŠ¥ë ¥ ì§„ë‹¨</span></h1>
            <p>ë¬¸ì œë¥¼ í’€ë©´ <strong>ë‚˜ì—ê²Œ ë”± ë§ëŠ” ì•ˆì „ ìˆ˜ì¹™</strong>ê³¼<br><strong>ì¸ì§€ ê±´ê°• ìƒíƒœ</strong>ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
            <button class="btn-start btn-action" onclick="startQuiz()">ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>

    <!-- 2. Q1: ì‹ í˜¸ë“± (ì§‘í–‰ê¸°ëŠ¥) -->
    <div class="slide-container" id="page-q1">
        <div class="split-box">
            <div>
                <h2>Q1. ì‹ í˜¸ë“±ì´ <span style="color:#27ae60;">ì´ˆë¡ë¶ˆë¡œ ê¹œë¹¡ì¼ ë•Œ</span> ì˜¬ë°”ë¥¸ í–‰ë™ì€?</h2>
                <button class="btn-option btn-action" onclick="answer(1, 0)"><i class="fa-solid fa-person-running"></i>â‘  ì–¼ë¥¸ ë›°ì–´ì„œ ê±´ë„Œë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(1, 10)"><i class="fa-solid fa-hand"></i>â‘¡ ë©ˆì¶”ê³  ë‹¤ìŒ ì‹ í˜¸ë¥¼ ê¸°ë‹¤ë¦°ë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(1, 3)"><i class="fa-solid fa-person-walking"></i>â‘¢ ì²œì²œíˆ ê±¸ì–´ì„œ ê±´ë„Œë‹¤</button>
            </div>
            <div class="img-wrapper"><img src="https://placehold.co/600x480/2ecc71/ffffff?text=Green+Light+Blinking" alt="ì‹ í˜¸ë“±"></div>
        </div>
    </div>

    <!-- 3. Q2: ì•¼ê°„ ë³´í–‰ (ì‹œê³µê°„/ì‹œì¸ì„±) -->
    <div class="slide-container" id="page-q2">
        <div class="split-box">
            <div class="img-wrapper"><img src="https://placehold.co/600x480/333333/ffffff?text=Night+Clothes" alt="ì•¼ê°„ ì˜·ì°¨ë¦¼"></div>
            <div>
                <h2>Q2. <span style="color:#ff6b6b;">ë°¤ì— ì™¸ì¶œí•  ë•Œ</span> ê°€ì¥ ì•ˆì „í•œ ì˜·ì°¨ë¦¼ì€?</h2>
                <button class="btn-option btn-action" onclick="answer(2, 0)"><i class="fa-solid fa-shirt" style="color:#333"></i>â‘  ë•Œê°€ ì•ˆ íƒ€ëŠ” ê²€ì€ìƒ‰ ì˜·</button>
                <button class="btn-option btn-action" onclick="answer(2, 5)"><i class="fa-solid fa-shirt" style="color:#999"></i>â‘¡ ë¬´ë‚œí•œ íšŒìƒ‰ ì˜·</button>
                <button class="btn-option btn-action" onclick="answer(2, 10)"><i class="fa-solid fa-vest-patches" style="color:#f39c12"></i>â‘¢ ëˆˆì— ì˜ ë„ëŠ” ë°ì€/ì•¼ê´‘ ì˜·</button>
            </div>
        </div>
    </div>

    <!-- 4. Q3: ë²„ìŠ¤ í•˜ì°¨ (ì£¼ì˜ë ¥) -->
    <div class="slide-container" id="page-q3">
        <div class="split-box">
            <div>
                <h2>Q3. ë²„ìŠ¤ì—ì„œ ë‚´ë¦´ ë•Œ <span style="color:#c0392b;">ê°€ì¥ ìœ„í—˜í•œ</span> í–‰ë™ì€ ë¬´ì—‡ì¼ê¹Œìš”?</h2>
                <button class="btn-option btn-action" onclick="answer(3, 10)"><i class="fa-solid fa-chair"></i>â‘  ì°¨ê°€ ë©ˆì¶˜ ë’¤ ì¼ì–´ë‚œë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(3, 0)"><i class="fa-solid fa-person-falling"></i>â‘¡ ë¯¸ë¦¬ ë¬¸ ì•ìœ¼ë¡œ ê±¸ì–´ ë‚˜ê°„ë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(3, 5)"><i class="fa-solid fa-hands-holding-circle"></i>â‘¢ ì†ì¡ì´ë¥¼ ê¼­ ì¡ê³  ê¸°ë‹¤ë¦°ë‹¤</button>
            </div>
            <div class="img-wrapper"><img src="https://placehold.co/600x480/3498db/ffffff?text=Bus+Safety" alt="ë²„ìŠ¤ í•˜ì°¨"></div>
        </div>
    </div>

    <!-- 5. Q4: ë¬´ë‹¨íš¡ë‹¨ (íŒë‹¨ë ¥/ì§€ë‚¨ë ¥) -->
    <div class="slide-container" id="page-q4">
        <div class="split-box">
            <div class="img-wrapper"><img src="https://placehold.co/600x480/e74c3c/ffffff?text=Crossing+Road" alt="ë„ë¡œ íš¡ë‹¨"></div>
            <div>
                <h2>Q4. íš¡ë‹¨ë³´ë„ê°€ ì—†ëŠ” ê³³ì—ì„œ ê¸¸ì„ ê±´ë„ˆì•¼ í•œë‹¤ë©´?</h2>
                <button class="btn-option btn-action" onclick="answer(4, 0)"><i class="fa-solid fa-person-walking-arrow-right"></i>â‘  ì°¨ê°€ ì—†ìœ¼ë©´ ë¹¨ë¦¬ ê±´ë„Œë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(4, 5)"><i class="fa-solid fa-hand"></i>â‘¡ ì†ì„ ë“¤ê³  ì¡°ì‹¬íˆ ê±´ë„Œë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(4, 10)"><i class="fa-solid fa-map-location-dot"></i>â‘¢ ë©€ë”ë¼ë„ íš¡ë‹¨ë³´ë„ë¥¼ ì°¾ëŠ”ë‹¤</button>
            </div>
        </div>
    </div>

    <!-- 6. Q5: ê³¨ëª©ê¸¸ (ê¸°ì–µë ¥/ê·œì¹™) -->
    <div class="slide-container" id="page-q5">
        <div class="split-box">
            <div>
                <h2>Q5. ì¸ë„ê°€ ì—†ëŠ” ê³¨ëª©ê¸¸ì—ì„œ ì–´ë””ë¡œ ê±¸ì–´ì•¼ í• ê¹Œìš”?</h2>
                <button class="btn-option btn-action" onclick="answer(5, 0)"><i class="fa-solid fa-road"></i>â‘  ê¸¸ í•œê°€ìš´ë°ë¡œ ê±·ëŠ”ë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(5, 10)"><i class="fa-solid fa-car-side"></i>â‘¡ ì°¨ì™€ ë§ˆì£¼ ë³´ê³  ê°€ì¥ìë¦¬ë¡œ</button>
                <button class="btn-option btn-action" onclick="answer(5, 5)"><i class="fa-solid fa-person-walking"></i>â‘¢ ì°¨ë¥¼ ë“±ì§€ê³  ê°€ì¥ìë¦¬ë¡œ</button>
            </div>
            <div class="img-wrapper"><img src="https://placehold.co/600x480/9b59b6/ffffff?text=Alley+Walking" alt="ê³¨ëª©ê¸¸ ë³´í–‰"></div>
        </div>
    </div>

    <!-- 7. Q6: ì˜¤ëŠ˜ ë‚ ì§œ (ì§€ë‚¨ë ¥ - ìˆ«ì íŒ¨ë“œ) -->
    <div class="slide-container" id="page-q6">
        <div class="center-box">
            <h2 style="margin-bottom: 15px;">Q6. ì˜¤ëŠ˜ì€ ëª‡ ì›” ë©°ì¹  ì¸ê°€ìš”?</h2>
            
            <div class="date-display">
                <span id="display-month" class="date-part"></span>ì›”
                <span id="display-day" class="date-part"></span>ì¼
            </div>

            <div class="numpad">
                <button class="num-btn btn-action" onclick="inputDate(1)">1</button>
                <button class="num-btn btn-action" onclick="inputDate(2)">2</button>
                <button class="num-btn btn-action" onclick="inputDate(3)">3</button>
                <button class="num-btn btn-action" onclick="inputDate(4)">4</button>
                <button class="num-btn btn-action" onclick="inputDate(5)">5</button>
                <button class="num-btn btn-action" onclick="inputDate(6)">6</button>
                <button class="num-btn btn-action" onclick="inputDate(7)">7</button>
                <button class="num-btn btn-action" onclick="inputDate(8)">8</button>
                <button class="num-btn btn-action" onclick="inputDate(9)">9</button>
                <button class="num-btn btn-action" onclick="deleteDate()"><i class="fa-solid fa-delete-left"></i></button>
                <button class="num-btn btn-action" onclick="inputDate(0)">0</button>
                <button class="num-btn confirm btn-action" onclick="submitDate()">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- 8. Q7: ì¸ì§€ì•ˆì „ í€´ì¦ˆ (ê³„ì‚°/íŒë‹¨) -->
    <div class="slide-container" id="page-q7">
        <div class="split-box">
            <div class="img-wrapper"><img src="https://placehold.co/600x480/e67e22/ffffff?text=Traffic+Light+Count" alt="ì‹ í˜¸ë“± ìˆ«ì"></div>
            <div>
                <h2>Q7. ë³´í–‰ ì‹ í˜¸ê°€ <span style="color:#e74c3c;">5ì´ˆ</span> ë‚¨ì•˜ìŠµë‹ˆë‹¤.<br>íš¡ë‹¨ë³´ë„ëŠ” ì•„ì§ ì ˆë°˜ë„ ëª» ê±´ë„œìŠµë‹ˆë‹¤.<br>ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?</h2>
                <button class="btn-option btn-action" onclick="answer(7, 0)"><i class="fa-solid fa-person-running"></i>â‘  ë›°ì–´ì„œ ê±´ë„Œë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(7, 10)"><i class="fa-solid fa-hand"></i>â‘¡ ë‹¤ìŒ ì‹ í˜¸ë¥¼ ê¸°ë‹¤ë¦°ë‹¤</button>
                <button class="btn-option btn-action" onclick="answer(7, 5)"><i class="fa-solid fa-person-walking"></i>â‘¢ ì°¨ê°€ ì•ˆ ì˜¤ë©´ ê·¸ëƒ¥ ê±´ë„Œë‹¤</button>
            </div>
        </div>
    </div>

    <!-- 9. Q8: í•™ë ¥ (ê¸°ì´ˆ ì •ë³´) -->
    <div class="slide-container" id="page-q8">
        <div class="center-box">
            <h2>Q8. ì–´ë¥´ì‹ ì˜ ìµœì¢… í•™ë ¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</h2>
            <p>ë§ì¶¤í˜• ê²°ê³¼ë¥¼ ìœ„í•´ í•„ìš”í•œ ì •ë³´ì…ë‹ˆë‹¤.</p>
            <div style="width: 600px;">
                <button class="btn-option btn-action" onclick="answer(8, 0)">â‘  ë¬´í•™ / ì´ˆë“±í•™êµ ì¡¸ì—…</button>
                <button class="btn-option btn-action" onclick="answer(8, 0)">â‘¡ ì¤‘í•™êµ ì¡¸ì—…</button>
                <button class="btn-option btn-action" onclick="answer(8, 0)">â‘¢ ê³ ë“±í•™êµ ì¡¸ì—…</button>
                <button class="btn-option btn-action" onclick="answer(8, 0)">â‘£ ëŒ€í•™êµ ì¡¸ì—… ì´ìƒ</button>
            </div>
        </div>
    </div>

    <!-- 10. ê²°ê³¼ ë¶„ì„ ì¤‘ -->
    <div class="slide-container" id="page-loading">
        <div class="center-box">
            <i class="fa-solid fa-gear fa-spin" style="font-size: 80px; color: #ffaa00; margin-bottom: 30px;"></i>
            <h2>í„°ì¹˜ ë°˜ì‘ ì†ë„ì™€ ì •í™•ë„ë¥¼<br>ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</h2>
        </div>
    </div>

    <!-- 11. ìµœì¢… ê²°ê³¼ ë³´ê³ ì„œ -->
    <div class="slide-container" id="page-result">
        <!-- ê´€ë¦¬ììš© ë¦¬ì…‹ ë²„íŠ¼ (ìš°ì¸¡ ìƒë‹¨) -->
        <button class="admin-reset-btn" onclick="resetQuiz()" title="ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° (ê´€ë¦¬ììš©)">
            <i class="fa-solid fa-rotate-right"></i>
        </button>

        <div style="height: 100%; display: flex; flex-direction: column;">
            <div style="text-align: center; margin-bottom: 10px;">
                <h1>ì§„ë‹¨ ê²°ê³¼ ë³´ê³ ì„œ</h1>
            </div>
            
            <div class="tab-menu">
                <button class="tab-btn active" onclick="switchTab('safety')">ğŸ›¡ï¸ ì•ˆì „ ë³´ê³ ì„œ</button>
                <button class="tab-btn" onclick="switchTab('cognitive')">ğŸ§  ì¸ì§€ ë³´ê³ ì„œ</button>
            </div>

            <!-- ì•ˆì „ ë³´ê³ ì„œ ë‚´ìš© -->
            <div id="report-safety" class="report-content show">
                <div class="score-box">
                    <span style="font-size: 28px; color:#555;">ë‚˜ì˜ êµí†µì•ˆì „ ì ìˆ˜</span><br>
                    <span class="score-num" id="safety-score">0ì </span>
                </div>
                
                <div class="split-box" style="align-items: start;">
                    <div>
                        <h3>ğŸ“Š ì´í‰ ë° ì†”ë£¨ì…˜</h3>
                        <p id="safety-feedback" style="font-size: 22px;">ì—¬ê¸°ì— í”¼ë“œë°±ì´ ë‚˜ì˜µë‹ˆë‹¤.</p>
                        <div class="solution-box">
                            <span class="solution-title">ğŸ’¡ ë§ì¶¤í˜• ì†”ë£¨ì…˜</span>
                            <ul style="font-size: 20px; padding-left: 20px; margin: 0;">
                                <li>ì•¼ê°„ ì™¸ì¶œ ì‹œ <strong>ë°ì€ ì˜·</strong> ì…ê¸°</li>
                                <li><strong>ë‚¨ì€ ì‹ í˜¸ ì‹œê°„</strong> ë¬´ë¦¬í•˜ê²Œ ê±´ë„ˆì§€ ì•Šê¸°</li>
                                <li>ë¬´ë‹¨íš¡ë‹¨ ê¸ˆì§€, <strong>ìš°íšŒí•˜ë”ë¼ë„ íš¡ë‹¨ë³´ë„ ì´ìš©</strong></li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h3>ğŸ“ ì¶”ì²œ êµìœ¡ & í™œë™</h3>
                        <div style="background: #f0f4f8; padding: 20px; border-radius: 15px;">
                            <p style="font-size: 20px; margin: 0 0 10px 0;"><strong>[ì¶”ì²œ êµìœ¡]</strong></p>
                            <p style="font-size: 18px; color: #555;">ê³ ë ¹ì êµí†µì•ˆì „ ìˆ˜ì¹™ ì‹¬í™” ê³¼ì • (ë³µì§€ê´€ 203í˜¸)</p>
                            
                            <hr style="border: 0; border-top: 1px solid #ddd; margin: 15px 0;">
                            
                            <p style="font-size: 20px; margin: 0 0 10px 0;"><strong>[ì´ë²ˆ ì£¼ í™œë™ ì œì•ˆ]</strong></p>
                            <ul style="font-size: 18px; color: #555; padding-left: 20px; margin: 0;">
                                <li>ì§€íŒ¡ì´ë‚˜ ê°€ë°©ì— <strong>ë°˜ì‚¬ ìŠ¤í‹°ì»¤ ë¶€ì°©í•˜ê¸°</strong></li>
                                <li>íš¡ë‹¨ë³´ë„ ê±´ë„ ë•Œ <strong>'ì† ë“¤ê¸°' 3ë²ˆ ì‹¤ì²œí•˜ê¸°</strong></li>
                                <li>ì‚°ì±… ì‹œ <strong>ë§ˆì£¼ ì˜¤ëŠ” ì°¨ í™•ì¸í•˜ê¸°</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¸ì§€ ë³´ê³ ì„œ ë‚´ìš© -->
            <div id="report-cognitive" class="report-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3>ğŸ§  ì¸ì§€ ê¸°ëŠ¥ ë° í–‰ë™ ë°˜ì‘ ë¶„ì„</h3>
                    <p style="font-size: 20px; color: #666;">í€´ì¦ˆ í’€ì´ íŒ¨í„´(ì‹œê°„, í„°ì¹˜)ì„ ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„í•œ ê²°ê³¼ì…ë‹ˆë‹¤.</p>
                </div>

                <!-- 4ê°œ ì´ìƒ ìœ„í—˜ ì‹œ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ ì˜ì—­ -->
                <div id="cognitive-warning"></div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    <div>
                        <!-- ì°¨íŠ¸ ì™¼ìª½: ì¸ì§€ ì˜ì—­ -->
                        <div class="chart-row">
                            <div class="chart-label">ì§€ë‚¨ë ¥<br><span style="font-size:14px; color:#999;">(ì‹œê°„/ì¥ì†Œ)</span></div>
                            <div class="chart-bar-bg"><div class="chart-bar" id="bar-orientation" style="width:0%"></div></div>
                            <span style="font-size: 24px; font-weight:bold; margin-left: 10px;" id="val-orientation">0</span>
                        </div>
                        <div class="chart-row">
                            <div class="chart-label">ê¸°ì–µë ¥<br><span style="font-size:14px; color:#999;">(ì •ë³´ì €ì¥)</span></div>
                            <div class="chart-bar-bg"><div class="chart-bar" id="bar-memory" style="width:0%"></div></div>
                            <span style="font-size: 24px; font-weight:bold; margin-left: 10px;" id="val-memory">0</span>
                        </div>
                        <div class="chart-row">
                            <div class="chart-label">ì£¼ì˜ë ¥<br><span style="font-size:14px; color:#999;">(ì§‘ì¤‘ìœ ì§€)</span></div>
                            <div class="chart-bar-bg"><div class="chart-bar" id="bar-attention" style="width:0%"></div></div>
                            <span style="font-size: 24px; font-weight:bold; margin-left: 10px;" id="val-attention">0</span>
                        </div>
                    </div>
                    <div>
                        <!-- ì°¨íŠ¸ ì˜¤ë¥¸ìª½: ì¸ì§€ ì˜ì—­ + í–‰ë™ ë¶„ì„ -->
                         <div class="chart-row">
                            <div class="chart-label">íŒë‹¨ë ¥<br><span style="font-size:14px; color:#999;">(ì˜ì‚¬ê²°ì •)</span></div>
                            <div class="chart-bar-bg"><div class="chart-bar" id="bar-executive" style="width:0%"></div></div>
                            <span style="font-size: 24px; font-weight:bold; margin-left: 10px;" id="val-executive">0</span>
                        </div>
                        <div class="chart-row">
                            <div class="chart-label">ì‹œê³µê°„<br><span style="font-size:14px; color:#999;">(ì‹œì•¼/ê±°ë¦¬)</span></div>
                            <div class="chart-bar-bg"><div class="chart-bar" id="bar-visuospatial" style="width:0%"></div></div>
                            <span style="font-size: 24px; font-weight:bold; margin-left: 10px;" id="val-visuospatial">0</span>
                        </div>
                       
                        <!-- í–‰ë™ ë°ì´í„° í‘œì‹œ -->
                        <div style="margin-top: 20px; background: #f8f9fa; border-radius: 10px; padding: 15px;">
                            <h4 style="margin: 0 0 10px 0; color: #555;">ğŸ–ï¸ í–‰ë™ ë°˜ì‘ ë¶„ì„</h4>
                            <p style="font-size: 18px; margin: 5px 0;">ë°˜ì‘ ì†ë„ ì§€ì—° (5ì´ˆâ†‘): <strong id="val-slow">0</strong>íšŒ</p>
                            <p style="font-size: 18px; margin: 5px 0;">ë¶€ì •í™•í•œ í„°ì¹˜ (ê³µë°±/ì—°íƒ€): <strong id="val-miss">0</strong>íšŒ</p>
                        </div>
                    </div>
                </div>

                <!-- 50ì  ì´í•˜ í•­ëª© ì†”ë£¨ì…˜ í‘œì‹œ ì˜ì—­ -->
                <div style="margin-top: 20px; border-top: 2px solid #eee; padding-top: 20px;">
                    <h4 style="margin: 0 0 15px 0; color: #333; font-size: 22px;">ğŸ’¡ ì¸ì§€ ì˜ì—­ë³„ ë§ì¶¤ ì†”ë£¨ì…˜</h4>
                    <div id="cognitive-solutions" style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
                        <!-- JSë¡œ ì†”ë£¨ì…˜ ì£¼ì… -->
                    </div>
                </div>

                <div id="behavior-feedback" style="background: #fff3e0; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: center;">
                     <p style="font-size: 18px; margin: 0; color: #d35400;">ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- í•˜ë‹¨ ë²„íŠ¼ ì œê±°ë¨ -->
        </div>
    </div>

    <script>
        // ì „ì—­ ìƒíƒœ ë³€ìˆ˜
        let currentScore = 0;
        let answers = { q1:0, q2:0, q3:0, q4:0, q5:0, q6:0, q7:0, q8:0 };
        const totalSlides = 8;
        
        // í–‰ë™ ë°ì´í„° ì¶”ì  ë³€ìˆ˜
        let startTime = 0; // ìŠ¬ë¼ì´ë“œ ì‹œì‘ ì‹œê°„
        let slowCount = 0; // 5ì´ˆ ì´ìƒ ê±¸ë¦° íšŸìˆ˜
        let missClickCount = 0; // ê³µë°± í„°ì¹˜ íšŸìˆ˜
        let multiTapCount = 0; // ë²„íŠ¼ ì—°íƒ€ íšŸìˆ˜
        let lastTapTime = 0; // ë§ˆì§€ë§‰ íƒ­ ì‹œê°„ (ë”ë¸”íƒ­ ê°ì§€ìš©)

        // ë‚ ì§œ ì…ë ¥ìš© ë³€ìˆ˜ (Q6)
        let dateInput = ""; // ì…ë ¥ëœ ìˆ«ì ìŠ¤íŠ¸ë§

        // ì‹œì‘ ë²„íŠ¼
        function startQuiz() {
            resetVariables();
            goToSlide('q1');
            startTouchTracker(); // í„°ì¹˜ ì¶”ì  ì‹œì‘
        }

        function resetVariables() {
            currentScore = 0;
            answers = { q1:0, q2:0, q3:0, q4:0, q5:0, q6:0, q7:0, q8:0 };
            slowCount = 0;
            missClickCount = 0;
            multiTapCount = 0;
            dateInput = "";
            document.getElementById('display-month').innerText = "";
            document.getElementById('display-day').innerText = "";
            // UI ì´ˆê¸°í™”
            document.getElementById('cognitive-warning').innerHTML = "";
            document.getElementById('cognitive-solutions').innerHTML = "";
        }

        // í„°ì¹˜ ì¶”ì ê¸° (body ì „ì²´)
        function startTouchTracker() {
            document.body.addEventListener('click', function(e) {
                // 1. ê³µë°± í„°ì¹˜ ê°ì§€
                // ë²„íŠ¼ì´ë‚˜ ì…ë ¥ì°½ì´ ì•„ë‹Œ ê³³ì„ í„°ì¹˜í–ˆëŠ”ì§€ í™•ì¸
                if (!e.target.closest('.btn-action')) {
                    // console.log("Miss click!");
                    missClickCount++;
                }

                // 2. ë²„íŠ¼ ì—°íƒ€ ê°ì§€ (ê°™ì€ ë²„íŠ¼ì„ ë¹ ë¥´ê²Œ ëˆ„ë¥´ëŠ” ê²½ìš°)
                if (e.target.closest('.btn-action')) {
                    const currentTime = new Date().getTime();
                    if (currentTime - lastTapTime < 500) { // 0.5ì´ˆ ì´ë‚´ ì¬í„°ì¹˜
                        multiTapCount++;
                    }
                    lastTapTime = currentTime;
                }
            });
        }

        // ìŠ¬ë¼ì´ë“œ ì´ë™ í•¨ìˆ˜
        function goToSlide(id) {
            // ì‹œê°„ ì¸¡ì • ì‹œì‘ (ìƒˆ ìŠ¬ë¼ì´ë“œ ì§„ì… ì‹œ)
            startTime = new Date().getTime();

            // ëª¨ë“  ìŠ¬ë¼ì´ë“œ ìˆ¨ê¹€ & ëª©í‘œ í‘œì‹œ
            document.querySelectorAll('.slide-container').forEach(el => el.classList.remove('active'));
            const target = document.getElementById('page-' + id);
            if (target) target.classList.add('active');
            
            // ì§„í–‰ë°” ì—…ë°ì´íŠ¸
            let progress = 0;
            if(id.startsWith('q')) {
                let num = parseInt(id.substring(1));
                progress = ((num - 1) / totalSlides) * 100;
            } else if (id === 'result' || id === 'loading') {
                progress = 100;
            }
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // ì •ë‹µ ì²˜ë¦¬ í•¨ìˆ˜
        function answer(qNum, score) {
            // ë°˜ì‘ ì‹œê°„ ì²´í¬
            const endTime = new Date().getTime();
            const duration = (endTime - startTime) / 1000; // ì´ˆ ë‹¨ìœ„
            if (duration > 5) {
                slowCount++;
            }

            answers['q' + qNum] = score;
            if (qNum !== 8) { // í•™ë ¥(Q8)ì€ ì ìˆ˜ì— ë¯¸ë°˜ì˜ í˜¹ì€ ë³„ë„ì²˜ë¦¬
                currentScore += score;
            }
            
            nextStep(qNum);
        }

        function nextStep(currentQNum) {
            if (currentQNum < totalSlides) {
                goToSlide('q' + (currentQNum + 1));
            } else {
                goToSlide('loading');
                setTimeout(showResult, 2000);
            }
        }

        // --- Q6: ë‚ ì§œ ì…ë ¥ ë¡œì§ (ìŠ¤ë§ˆíŠ¸ ì…ë ¥ ê°œì„ ) ---
        function inputDate(num) {
            if (dateInput.length >= 4) return;

            let len = dateInput.length;

            // 1. ì›” ì…ë ¥ ë‹¨ê³„
            if (len === 0) {
                if (num === 1) {
                    dateInput = "1"; // '1'ë§Œ ì…ë ¥ ì‹œ 01ë¡œ ë³´ì´ì§€ë§Œ, ë³€ê²½ ê°€ëŠ¥ ìƒíƒœ
                } else if (num >= 2) {
                    dateInput = "0" + num; // 2~9ëŠ” ìë™ 0 ë¶™ì„
                } else {
                    dateInput = "0"; // 0
                }
            } 
            else if (len === 1) {
                // ì´ì „ ì…ë ¥ì´ '1'ì´ì—ˆì„ ê²½ìš° (íŠ¹ìˆ˜ ì¼€ì´ìŠ¤)
                if (dateInput === "1") {
                    if (num <= 2) {
                        // 10, 11, 12ì›” ì…ë ¥
                        dateInput += num;
                    } else {
                        // 01ì›”ë¡œ í™•ì •í•˜ê³  Day ì…ë ¥ ì‹œì‘
                        // í˜„ì¬ ì…ë ¥ê°’ numì€ ì¼(Day)ì˜ ì²« ìë¦¬ë¡œ
                        let fixedMonth = "01";
                        if (num >= 4) {
                            dateInput = fixedMonth + "0" + num;
                        } else {
                            dateInput = fixedMonth + num;
                        }
                    }
                } 
                // ì´ì „ ì…ë ¥ì´ '0'ì´ì—ˆì„ ê²½ìš°
                else if (dateInput === "0") {
                    dateInput += num;
                }
            }
            // 2. ì¼ ì…ë ¥ ë‹¨ê³„ (ì›”ì´ 2ìë¦¬ ì±„ì›Œì§„ í›„)
            else if (len === 2) {
                if (num >= 4) {
                    dateInput += "0" + num;
                } else {
                    dateInput += num;
                }
            }
            else if (len === 3) {
                dateInput += num;
            }

            updateDateDisplay();
        }

        function deleteDate() {
            dateInput = dateInput.slice(0, -1);
            updateDateDisplay();
        }

        function updateDateDisplay() {
            let month = "";
            let day = "";

            if (dateInput === "1") {
                month = "01"; // '1'ë§Œ ì…ë ¥í•´ë„ '01'ë¡œ ë³´ì—¬ì¤Œ
            } else if (dateInput.length >= 2) {
                month = dateInput.substring(0, 2);
                if (dateInput.length > 2) {
                    day = dateInput.substring(2);
                }
            } else {
                month = dateInput;
            }

            document.getElementById('display-month').innerText = month;
            document.getElementById('display-day').innerText = day;
        }

        function submitDate() {
            // ì •ë‹µ ì²´í¬ ë¡œì§ (ì‹¤ì œ ì˜¤ëŠ˜ ë‚ ì§œì™€ ë¹„êµ)
            const today = new Date();
            const currentMonth = today.getMonth() + 1; 
            const currentDay = today.getDate();
            
            // ì…ë ¥ ë³´ì •: "1" ìƒíƒœì—ì„œ í™•ì¸ ëˆ„ë¥´ë©´ "01"ì›”ë¡œ ì²˜ë¦¬
            let finalInput = dateInput;
            if (finalInput === "1") finalInput = "01";

            let inputM = 0;
            let inputD = 0;

            if (finalInput.length >= 2) inputM = parseInt(finalInput.substring(0, 2));
            if (finalInput.length >= 3) inputD = parseInt(finalInput.substring(2));

            // ë°˜ì‘ ì‹œê°„ ì²´í¬
            const endTime = new Date().getTime();
            if ((endTime - startTime) / 1000 > 8) { // ë‚ ì§œ ì…ë ¥ì€ ì¢€ ë” ì—¬ìœ ìˆê²Œ (8ì´ˆ)
                slowCount++; 
            } else if ((endTime - startTime) / 1000 > 5) {
               // 5ì´ˆ ì´ˆê³¼ëŠ” ì¼ë°˜ ì¹´ìš´íŠ¸
               slowCount++;
            }

            let score = 0;
            if (inputM === currentMonth && inputD === currentDay) score = 10;
            else if (inputM === currentMonth) score = 5; 
            
            answers['q6'] = score;
            currentScore += score;
            nextStep(6);
        }
        // -------------------------

        // ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ í•¨ìˆ˜
        function showResult() {
            goToSlide('result');
            
            // 1. ì•ˆì „ ì ìˆ˜ (ì´ 7ë¬¸ì œ ì¤‘ Q6ì§€ë‚¨ë ¥, Q8í•™ë ¥ ì œì™¸í•œ 5ë¬¸ì œ+Q7 = 6ë¬¸ì œ * 10ì  ë§Œì  = 60ì ??)
            // ê¸°ì¡´ 5ë¬¸ì œ + Q7(íŒë‹¨) = 60ì  ë§Œì ìœ¼ë¡œ ê³„ì‚° í›„ 100ì  í™˜ì‚°
            // Q1, Q2, Q3, Q4, Q5, Q7 -> êµí†µì•ˆì „ ê´€ë ¨
            let safetyTotal = answers.q1 + answers.q2 + answers.q3 + answers.q4 + answers.q5 + answers.q7;
            let finalSafetyScore = Math.round((safetyTotal / 60) * 100);
            
            document.getElementById('safety-score').innerText = finalSafetyScore + "ì  / 100ì ";

            // í”¼ë“œë°± í…ìŠ¤íŠ¸
            let feedbackText = "";
            if(finalSafetyScore >= 90) feedbackText = "ğŸŒŸ ì™„ë²½í•©ë‹ˆë‹¤! êµí†µì•ˆì „ ì§€ì‹ì´ ë§¤ìš° í›Œë¥­í•˜ì‹­ë‹ˆë‹¤.";
            else if(finalSafetyScore >= 70) feedbackText = "ğŸ‘ ì˜í•˜ì…¨ì–´ìš”! ì•ˆì „ ìˆ˜ì¹™ì„ ì˜ ì•Œê³  ê³„ì‹œë„¤ìš”.";
            else feedbackText = "âš ï¸ ì‚¬ê³  ì˜ˆë°©ì„ ìœ„í•´ ì•ˆì „ ìˆ˜ì¹™ì„ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•´ì£¼ì„¸ìš”.";
            document.getElementById('safety-feedback').innerText = feedbackText;

            // 2. ì¸ì§€ ì ìˆ˜ ê³„ì‚°
            let cognitive = {
                orientation: Math.min(100, (answers.q6 * 10)), // ì§€ë‚¨ë ¥ (ë‚ ì§œ)
                memory: Math.min(100, (answers.q1 * 5 + answers.q5 * 5) + 20), // ê¸°ì–µë ¥ (ê·œì¹™)
                attention: Math.min(100, (answers.q3 * 10) + 20), // ì£¼ì˜ë ¥ (ë²„ìŠ¤)
                visuospatial: Math.min(100, (answers.q2 * 10) + 20), // ì‹œê³µê°„ (ì•¼ê°„)
                executive: Math.min(100, (answers.q1 * 5 + answers.q4 * 5 + answers.q7 * 5) + 10), // íŒë‹¨ë ¥ (ì‹ í˜¸/íš¡ë‹¨)
            };

            // í–‰ë™ ë°ì´í„° í‘œì‹œ
            document.getElementById('val-slow').innerText = slowCount;
            document.getElementById('val-miss').innerText = missClickCount + multiTapCount;

            // í–‰ë™ í”¼ë“œë°±
            let behaviorMsg = "";
            if (slowCount >= 3) {
                behaviorMsg += "â³ ë¬¸í•­ ë°˜ì‘ ì†ë„ê°€ ë‹¤ì†Œ ëŠë¦½ë‹ˆë‹¤. ì¹¨ì°©í•˜ê²Œ ìƒê°í•˜ëŠ” ì—¬ìœ ê°€ í•„ìš”í•´ìš”. ";
            }
            if (missClickCount + multiTapCount >= 3) {
                behaviorMsg += "ğŸ‘† í„°ì¹˜ê°€ ë‹¤ì†Œ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. í™”ë©´ì„ ì²œì²œíˆ ì •í™•í•˜ê²Œ ëˆ„ë¥´ëŠ” ì—°ìŠµì´ ë„ì›€ë©ë‹ˆë‹¤.";
            }
            if (behaviorMsg === "") behaviorMsg = "âœ¨ ë°˜ì‘ ì†ë„ì™€ í„°ì¹˜ ì •í™•ë„ê°€ ë§¤ìš° ì–‘í˜¸í•©ë‹ˆë‹¤!";
            
            document.getElementById('behavior-feedback').innerHTML = `<p style="font-size: 20px; color:#d35400;">${behaviorMsg}</p>`;

            // --- ì‹ ê·œ ë¡œì§: ì¸ì§€ ì†”ë£¨ì…˜ ë° ê²½ê³  ë©”ì‹œì§€ ---
            let lowScoreCount = 0;
            let solutionHTML = '<ul style="text-align: left; font-size: 20px; color: #444; margin: 0; padding-left: 20px;">';

            // ê° ì˜ì—­ë³„ ì†”ë£¨ì…˜ ë§¤í•‘
            const feedbackMap = {
                orientation: "<strong>[ì§€ë‚¨ë ¥ ì €í•˜]</strong> ë‚ ì§œ/ì¥ì†Œ í˜¼ë™ ìœ„í—˜. ì™¸ì¶œ ì „ <strong>ë‹¬ë ¥ í™•ì¸ ìŠµê´€</strong>ì´ í•„ìš”í•©ë‹ˆë‹¤.",
                memory: "<strong>[ê¸°ì–µë ¥ ì €í•˜]</strong> ì•ˆì „ ìˆ˜ì¹™ì„ ìŠê¸° ì‰½ìŠµë‹ˆë‹¤. <strong>'ë©ˆì¶˜ë‹¤, ë³¸ë‹¤'ë¥¼ ì†Œë¦¬ ë‚´ì–´</strong> ë§í•˜ì„¸ìš”.",
                attention: "<strong>[ì£¼ì˜ë ¥ ì €í•˜]</strong> ì£¼ë³€ ìœ„í—˜ì„ ë†“ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <strong>ë³´í–‰ ì¤‘ ë”´ìƒê°ì€ ê¸ˆë¬¼</strong>ì…ë‹ˆë‹¤.",
                visuospatial: "<strong>[ì‹œê³µê°„ ì €í•˜]</strong> ì°¨ê°€ ë©€ë¦¬ ë³´ì—¬ë„ <strong>ì‹¤ì œë¡œëŠ” ê°€ê¹Œìš¸ ìˆ˜ ìˆìœ¼ë‹ˆ</strong> ì—¬ìœ ë¥¼ ê°€ì§€ì„¸ìš”.",
                executive: "<strong>[íŒë‹¨ë ¥ ì €í•˜]</strong> ëŒë°œ ìƒí™© ëŒ€ì²˜ê°€ ëŠ¦ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <strong>ë¬´ë¦¬í•œ íš¡ë‹¨ì€ ì ˆëŒ€ ê¸ˆì§€</strong>ì…ë‹ˆë‹¤."
            };

            for (const [key, score] of Object.entries(cognitive)) {
                if (score <= 50) {
                    lowScoreCount++;
                    solutionHTML += `<li style="margin-bottom: 10px;">${feedbackMap[key]}</li>`;
                }
            }
            solutionHTML += '</ul>';

            if (lowScoreCount === 0) {
                solutionHTML = '<p style="color: #27ae60; font-weight: bold; font-size: 20px; text-align: center; margin: 0;">ğŸ‘ ëª¨ë“  ì¸ì§€ ì˜ì—­ì´ ì–‘í˜¸í•©ë‹ˆë‹¤! ì§€ê¸ˆì²˜ëŸ¼ ê±´ê°•ì„ ìœ ì§€í•˜ì„¸ìš”.</p>';
            }

            // 4ê°œ ì´ìƒ ì‹œ ê°•ë ¥ ê²½ê³ 
            let warningMsg = "";
            if (lowScoreCount >= 4) {
                warningMsg = `<div style="background-color: #ffebee; border: 3px solid #e53935; padding: 20px; border-radius: 15px; margin-bottom: 30px; animation: pulse 2s infinite;">
                    <h3 style="color: #c62828; margin: 0 0 10px 0; font-size: 28px;"><i class="fa-solid fa-triangle-exclamation"></i> ì „ë¬¸ ìƒë‹´ ê¶Œì¥</h3>
                    <p style="margin: 0; font-size: 22px; color: #b71c1c; font-weight: bold;">
                        4ê°œ ì´ìƒì˜ ì˜ì—­ì—ì„œ ê¸°ëŠ¥ ì €í•˜ê°€ ì˜ì‹¬ë©ë‹ˆë‹¤.<br>
                        ê°€ê¹Œìš´ <span style="text-decoration: underline;">ì¹˜ë§¤ì•ˆì‹¬ì„¼í„°</span>ë‚˜ ë³‘ì›ì„ ë°©ë¬¸í•˜ì—¬<br>
                        ì •ë°€ ê²€ì‚¬ë¥¼ ë°›ì•„ë³´ì‹œê¸°ë¥¼ ê¶Œí•´ ë“œë¦½ë‹ˆë‹¤.
                    </p>
                </div>
                <style>@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }</style>
                `;
            }

            // DOM ì‚½ì…
            document.getElementById('cognitive-solutions').innerHTML = solutionHTML;
            document.getElementById('cognitive-warning').innerHTML = warningMsg;
            // ---------------------------------------------

            // ì°¨íŠ¸ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                updateChart('orientation', cognitive.orientation);
                updateChart('memory', cognitive.memory);
                updateChart('attention', cognitive.attention);
                updateChart('visuospatial', cognitive.visuospatial);
                updateChart('executive', cognitive.executive);
            }, 500);
        }

        function updateChart(id, val) {
            const bar = document.getElementById('bar-' + id);
            const valSpan = document.getElementById('val-' + id);
            if(bar && valSpan) {
                bar.style.width = val + '%';
                valSpan.innerText = val;
            }
        }

        function resetQuiz() {
            resetVariables();
            // ì°¨íŠ¸ ì´ˆê¸°í™”
            const charts = ['orientation', 'memory', 'attention', 'visuospatial', 'executive'];
            charts.forEach(id => {
                document.getElementById('bar-' + id).style.width = '0%';
                document.getElementById('val-' + id).innerText = '0';
            });
            // íƒ­ ì´ˆê¸°í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-btn')[0].classList.add('active'); 
            document.querySelectorAll('.report-content').forEach(content => content.classList.remove('show'));
            document.getElementById('report-safety').classList.add('show');
            goToSlide('start');
        }

        function switchTab(tab) {
            const btns = document.querySelectorAll('.tab-btn');
            btns.forEach(btn => btn.classList.remove('active'));
            if(event && event.target) event.target.classList.add('active');
            document.querySelectorAll('.report-content').forEach(content => content.classList.remove('show'));
            const targetContent = document.getElementById('report-' + tab);
            if(targetContent) targetContent.classList.add('show');
        }
    </script>
</body>
</html>
